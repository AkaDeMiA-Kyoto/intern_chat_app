{% extends "myapp/base.html" %}
{% load static %}

{% block extra_style %}
<link rel="stylesheet" href="{% static 'myapp/css/talk_room.css' %}">
{% endblock %}


{% block header %}
<header class="header">
    <div class="header-container">
        <span class="header-container__title">
            {% block header-title %}{{header_title}}{% endblock %}
            <a href="{% url 'friends' %}" class='backbtn'>&lt;</a>
        </span>
    </div>
</header>
{% endblock %}


{% block content %}
{% for item in data %}
    <!-- ログインユーザが送ったのか受けったのかで表示を分ける -->
    <!-- 送り手だったとき -->
    {% if item.senduser_id == send_user_id %}
    <div class='table senduser'>
      <table>
        <tr class='name'>

          <!-- <th>＞</th> -->
          <td><img src="{{MEDIA_URL}}{{senduser_img.url}}" alt="写真は存在しません" class='icon'></td>
          <td>{{item.senduser_name}}</td>
     
        </tr>
        <tr class='msg'>
          <th></th>
          <td>{{item.content}}</td>
        </tr>
        <tr class='date'>
          <th></th>
          <td>{{item.pub_date}}</td>
        </tr>
      </table>
    </div>
    {% else %}
    <!-- 受け取り側だったとき -->
    <div class='table reseaveuser'>
      <table>
        <tr class='name'>
          <!-- <th>＞</th> -->
          <td><img src="{{MEDIA_URL}}{{friend_img.url}}" alt="写真は存在しません" class='icon'></td>
          <td>{{item.senduser_name}}</td>
     
        </tr>
        <tr class='msg'>
          <th></th>
          <td>{{item.content}}</td>
        </tr>
        <tr class='date'>
          <th></th>
          <td>{{item.pub_date}}</td>
      </tr>
      </table>
    </div>
    {% endif %}
  {% endfor %}

  <form method="post">
    {% csrf_token %}
      <table class='message_input'>
        <td>
        {{ form.as_p }}
        </td>
        <td>
          <input type="submit" value='送信' class='btn'>
        </td>
      </table>
  </form>
{% endblock %}
{% block footer %}
{% endblock %}