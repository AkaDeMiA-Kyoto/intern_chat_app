{% extends 'myapp/base.html' %}
{% load static %}

{% block extra_style %}
<link rel="stylesheet" type="text/css" href="{% static 'myapp/css/talk_room.css' %}" />
{% endblock %}

{% block header %}
    <header class="header">
        <div class='header-container'>
            <a href='{% url "friends" %}' class='back'>＜</a>
            <div class="title">
                {{ partner.username }}
            </div>
            <nav><a href='{% url "talk_room" room_path %}' class='update'><span>更新</span></a></nav>
        </div>
    </header>
{% endblock %}


{% block content %}
<div class='content' id='content'>
    {% for message, pro_message, time in message_list %}
    <div class='container'>
    {% if message.talk_from == user %}
        <div class='my-talk-container'>
            <div class='group'>{{ time|safe }}</div>    
            <div class='message group mine'>{{ pro_message|safe }}</div>
        </div>
    {% else %}
        <div class='talk-from'>{{ message.talk_from }}</div>
        <div class='your-talk-container'>    
            <div class='message group yours'>{{ pro_message|safe }}</div>
            <div class='group'>{{ time|safe }}</div>
        </div>
    {% endif %}
    </div>  
    {% endfor %}
    <div class='container' id='container'></div>
</div>
{% endblock %}

{% block footer %}
<footer class="footer-container">
    <div class='text-container'>
        <div class='input-wrap'>
            <input id="chat-message-input" class='form-control' type="text">
        </div>
        <div>
            <input type='submit' class='submit-button' value='送信'>
        </div>
</footer>
</div>
{% endblock %}

{% block script %}
{{ partner.id|json_script:'partner' }}
{{ user.id|json_script:'user' }}
{{ room_path|json_script:'room_path'}}
<script type='text/javascript' src="{% static 'myapp/js/talk_room.js' %}"></script>
{% endblock %}