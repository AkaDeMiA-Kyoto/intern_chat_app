{% extends "myapp/base.html" %}
{% load static %}

{% block header-title %}
  友達
{% endblock header-title %}

{% block extra_style %}
  <link rel="stylesheet"
        type="text/css"
        href='{% static "myapp/css/friends.css" %}' />
{% endblock extra_style %}

{% block content %}
  <div class="friend_container">
    {% for icon, friend, message, time in talk_info %}
      <a href="{% url 'myapp:talk_room' friend.id %}">
        <div class="friend_box">
          {% if friend.image.url %}
            <img src="{{ friend.image.url }}"
                 alt="icon"
                 height="auto"
                 width="auto"
                 class="friend_icon" />
          {% else %}
            <img src="{% static "img/icon.jpg" %}" alt="デフォルト画像" height="auto" width="auto" class="friend_icon" />
          {% endif %}
          <div class="friend_name">{{ friend }}</div>
          <div class="friend_message">
            {% if message == None %}
            {% else %}
              {{ message }}
            {% endif %}
          </div>
          <div class="friend_time">{{ time|date:"m/d H:i" }}</div>
        </div>
      </a>
    {% endfor %}
    <!-- 検索フォーム -->
    <div class="search">
      <form action="{% url "myapp:friends" %}" method="get">
        <input type="text" name='q' value={{ request.GET.q }}>
        <button type="submit" value='search'>検索</button>
      </form>
    </div>
  </div>
{% endblock content %}
